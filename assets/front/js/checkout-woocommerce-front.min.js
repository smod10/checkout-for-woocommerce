var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};define("Elements/Element",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.jel=e}return Object.defineProperty(e.prototype,"jel",{get:function(){return this._jel},set:function(e){this._jel=e},enumerable:!0,configurable:!0}),e}();t.Element=n}),define("Elements/TabContainerBreadcrumb",["require","exports","Elements/Element"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(n.Element);t.TabContainerBreadcrumb=i}),define("Enums/LabelType",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.TEXT=0]="TEXT",e[e.PASSWORD=1]="PASSWORD",e[e.SELECT=2]="SELECT"}(t.LabelType||(t.LabelType={}))}),define("Enums/AlertType",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.LoginFailBadAccInfo=0]="LoginFailBadAccInfo"}(t.AlertType||(t.AlertType={}))}),define("Types/Types",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}),define("Elements/FormElement",["require","exports","Elements/Element","Enums/LabelType"],function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t){var n=e.call(this,t)||this;return n._eventCallbacks=[],n}return __extends(t,e),t.getLabelTypes=function(){return $.map(i.LabelType,function(e,t){return[e]})},t.prototype.regAndWrap=function(){this.registerEventCallbacks(),this.wrapClassSwap(this.holder.jel.val())},t.prototype.setHolderAndLabel=function(e,i){void 0===i&&(i=!1);for(var r=t.getLabelTypes(),o=0;o<r.length/2;o++){var s=e;if(i&&"string"==typeof e){var a=r[o].toLowerCase();s=this.jel.find(e.replace("%s",a))}s.length>0&&(this.holder=new n.Element(s))}},t.prototype.wrapClassSwap=function(e){""===e||this.jel.hasClass(t.labelClass)||this.jel.addClass(t.labelClass),""===e&&this.jel.hasClass(t.labelClass)&&this.jel.removeClass(t.labelClass)},t.prototype.registerEventCallbacks=function(){var e=this;this.holder&&this.eventCallbacks.forEach(function(t){var n=t.eventName,i=t.func,r=t.target;r||(r=e.holder.jel),r.on(n,i)})},Object.defineProperty(t,"labelClass",{get:function(){return t._labelClass},set:function(e){t._labelClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventCallbacks",{get:function(){return this._eventCallbacks},set:function(e){this._eventCallbacks=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moduleContainer",{get:function(){return this._moduleContainer},set:function(e){this._moduleContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"holder",{get:function(){return this._holder},set:function(e){this._holder=e},enumerable:!0,configurable:!0}),t}(n.Element);r._labelClass="cfw-floating-label",t.FormElement=r}),define("Elements/InputLabelWrap",["require","exports","Elements/FormElement"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.setHolderAndLabel('input[type="%s"]',!0),n.eventCallbacks=[{eventName:"keyup",func:function(){this.wrapClassSwap(this.holder.jel.val())}.bind(n),target:null}],n.regAndWrap(),n}return __extends(t,e),t}(n.FormElement);t.InputLabelWrap=i}),define("Elements/SelectLabelWrap",["require","exports","Elements/FormElement"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.setHolderAndLabel(n.jel.find("select")),n.eventCallbacks=[{eventName:"change",func:function(){this.wrapClassSwap(this.holder.jel.val())}.bind(n),target:null},{eventName:"keyup",func:function(){this.wrapClassSwap(this.holder.jel.val())}.bind(n),target:null}],n.regAndWrap(),n}return __extends(t,e),t}(n.FormElement);t.SelectLabelWrap=i}),define("Elements/TabContainerSection",["require","exports","Elements/Element","Elements/InputLabelWrap","Enums/LabelType","Elements/SelectLabelWrap"],function(e,t,n,i,r,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n){var i=e.call(this,t)||this;return i._name="",i._inputLabelWraps=[],i._selectLabelWraps=[],i.name=n,i.setWraps(),i}return __extends(t,e),t.prototype.getInputLabelWrapById=function(e){return this.inputLabelWraps.find(function(t){return t.jel.attr("id")==e})},t.prototype.getWrapSelector=function(){var e="";return t.inputLabelTypes.forEach(function(n,i){e+="."+t.inputLabelWrapClass+"."+n.cssClass,i+1!=t.inputLabelTypes.length&&(e+=", ")}),e},t.prototype.setWraps=function(){var e=[],t=[];this.jel.find(this.getWrapSelector()).each(function(n,r){var s=$(r).parents(".cfw-module");if($(r).hasClass("cfw-select-input")){var a=new o.SelectLabelWrap($(r));a.moduleContainer=s,t.push(a)}else{var l=new i.InputLabelWrap($(r));l.moduleContainer=s,e.push(l)}}),this.inputLabelWraps=e,this.selectLabelWraps=t},t.prototype.getFormElementsByModule=function(e){var t=[];return this.inputLabelWraps.forEach(function(n){n.moduleContainer.attr("id")==e&&t.push(n)}),this.selectLabelWraps.forEach(function(n){n.moduleContainer.attr("id")==e&&t.push(n)}),t},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputLabelWraps",{get:function(){return this._inputLabelWraps},set:function(e){this._inputLabelWraps=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectLabelWraps",{get:function(){return this._selectLabelWraps},set:function(e){this._selectLabelWraps=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"inputLabelTypes",{get:function(){return t._inputLabelTypes},set:function(e){t._inputLabelTypes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"inputLabelWrapClass",{get:function(){return t._inputLabelWrapClass},set:function(e){t._inputLabelWrapClass=e},enumerable:!0,configurable:!0}),t}(n.Element);s._inputLabelWrapClass="cfw-input-wrap",s._inputLabelTypes=[{type:r.LabelType.TEXT,cssClass:"cfw-text-input"},{type:r.LabelType.PASSWORD,cssClass:"cfw-password-input"},{type:r.LabelType.SELECT,cssClass:"cfw-select-input"}],t.TabContainerSection=s}),define("Actions/Action",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.id=e,this.url=t,this.data=n}return e.prototype.load=function(){$.post(this.url.href,this.data,this.response.bind(this))},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),e}();t.Action=n}),define("Decorators/ResponsePrep",["require","exports"],function(e,t){function n(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var i=n.value;return n.value=function(){return arguments[0]=JSON.parse(arguments[0]),i.apply(this,arguments)},n}Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsePrep=n}),define("Actions/AccountExistsAction",["require","exports","Actions/Action","Decorators/ResponsePrep"],function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n,i){var r={action:t,security:n.nonce,email:i};return e.call(this,t,n.admin_url,r)||this}return __extends(t,e),t.prototype.response=function(e){e.account_exists?($("#cfw-login-slide").slideDown(300),$("#cfw-login-slide input[type='password']").focus(),$("#cfw-acc-register-chk").attr("checked",null)):($("#cfw-login-slide").slideUp(300),$("#cfw-acc-register-chk").attr("checked",""))},t}(n.Action);__decorate([i.ResponsePrep],r.prototype,"response",null),t.AccountExistsAction=r}),define("Elements/Alert",["require","exports","Elements/Element"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var i=e.call(this,t)||this;return i.alertInfo=n,i}return __extends(t,e),t.prototype.addAlert=function(){this.jel.find(".message").html(this.alertInfo.message),this.jel.addClass(this.alertInfo.cssClass),this.jel.slideDown(300)},Object.defineProperty(t.prototype,"alertInfo",{get:function(){return this._alertInfo},set:function(e){this._alertInfo=e},enumerable:!0,configurable:!0}),t}(n.Element);t.Alert=i}),define("Actions/LoginAction",["require","exports","Actions/Action","Elements/Alert","Decorators/ResponsePrep","Enums/AlertType"],function(e,t,n,i,r,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n,i,r){var o={action:t,security:n.nonce,email:i,password:r};return e.call(this,t,n.admin_url,o)||this}return __extends(t,e),t.prototype.response=function(e){if(e.logged_in)location.reload();else{var t={type:o.AlertType.LoginFailBadAccInfo,message:e.message,cssClass:"cfw-alert-danger"};new i.Alert($("#cfw-alert-container"),t).addAlert()}},t}(n.Action);__decorate([r.ResponsePrep],s.prototype,"response",null),t.LoginAction=s}),define("Actions/UpdateShippingFieldsAction",["require","exports","Actions/Action","Decorators/ResponsePrep"],function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n,i,r){var o=this,s={action:t,security:n.nonce,shipping_fields_info:i};return o=e.call(this,t,n.admin_url,s)||this,o.shipping_details_fields=r,o}return __extends(t,e),t.prototype.response=function(e){var t=this;if(!e.error){var n=[];e.updated_fields_info?(console.log(e),Object.keys(e.updated_fields_info).forEach(function(t){n.push(e.updated_fields_info[t])}),n.sort(),n.forEach(function(e){var n=e.field_type,i=e.field_value;t.shipping_details_fields.forEach(function(e){e.attr("field_type")==n&&e.children(".field_value").text(i)})}),$("#cfw-cart-shipping-total .amount").html(e.new_shipping_total)):console.log(e)}},Object.defineProperty(t.prototype,"shipping_details_fields",{get:function(){return this._shipping_details_fields},set:function(e){this._shipping_details_fields=e},enumerable:!0,configurable:!0}),t}(n.Action);__decorate([i.ResponsePrep],r.prototype,"response",null),t.UpdateShippingFieldsAction=r}),define("Elements/TabContainer",["require","exports","Elements/Element","Actions/AccountExistsAction","Actions/LoginAction","Actions/UpdateShippingFieldsAction"],function(e,t,n,i,r,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.tabContainerBreadcrumb=n,r.tabContainerSections=i,r}return __extends(t,e),t.prototype.setAccountCheckListener=function(e){var t=this.tabContainerSectionBy("name","customer_info"),n=t.getInputLabelWrapById("cfw-email-wrap");if(n){var r=n.holder.jel;new i.AccountExistsAction("account_exists",e,r.val()).load(),r.on("keyup",function(){return new i.AccountExistsAction("account_exists",e,r.val()).load()})}},t.prototype.setLogInListener=function(e){var t=this.tabContainerSectionBy("name","customer_info"),n=t.getInputLabelWrapById("cfw-email-wrap");if(n){var i=n.holder.jel,o=t.getInputLabelWrapById("cfw-password-wrap"),s=o.holder.jel;$("#cfw-login-btn").on("click",function(){return new r.LoginAction("login",e,i.val(),s.val()).load()})}},t.prototype.setUpdateShippingFieldsListener=function(e){var n=this.tabContainerSectionBy("name","customer_info"),i=n.getFormElementsByModule("cfw-shipping-info"),r=this.getUpdateShippingRequiredItems(),o=function(e,n,i,r,o){e.holder.jel.on(o,function(o){t.genericUpdateShippingFieldsActionProcess(e,o.target.value,i,n,r).load()})};i.forEach(function(t){o(t,r.action,e,r.shipping_details_fields,"change")})},t.prototype.setUpdateAllShippingFieldsListener=function(e){var n=this.tabContainerSectionBy("name","customer_info"),i=n.getFormElementsByModule("cfw-shipping-info"),r=n.jel.find("#cfw-shipping-info-action"),o=this.tabContainerBreadcrumb.jel.find(".tab:nth-child(2), .tab:nth-child(3)"),s=this.getUpdateShippingRequiredItems(),a=function(n){i.forEach(function(n){t.genericUpdateShippingFieldsActionProcess(n,n.holder.jel.val(),e,s.action,s.shipping_details_fields).load()})};r.on("click",a.bind(this)),o.on("click",a.bind(this))},t.genericUpdateShippingFieldsActionProcess=function(e,t,n,i,r){var s=e.holder.jel.attr("field_key"),a={field_type:s,field_value:t};return console.log(e,t,n,i,r),new o.UpdateShippingFieldsAction(i,n,[a],r)},t.prototype.getUpdateShippingRequiredItems=function(){var e=(this.tabContainerSectionBy("name","customer_info"),$("#cfw-shipping-details-fields .cfw-shipping-details-field")),t=[];return e.each(function(e,n){t.push($(n))}),{action:"update_shipping_fields",shipping_details_fields:t}},t.prototype.easyTabs=function(){this.jel.easytabs()},t.prototype.tabContainerSectionBy=function(e,t){return this.tabContainerSections.find(function(n){return n[e]==t})},Object.defineProperty(t.prototype,"tabContainerBreadcrumb",{get:function(){return this._tabContainerBreadcrumb},set:function(e){this._tabContainerBreadcrumb=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabContainerSections",{get:function(){return this._tabContainerSections},set:function(e){this._tabContainerSections=e},enumerable:!0,configurable:!0}),t}(n.Element);t.TabContainer=s}),define("Main",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.tabContainer=e,this.ajaxInfo=t}return e.prototype.setup=function(){this.tabContainer.easyTabs(),this.setupAnimationListeners(),this.tabContainer.setAccountCheckListener(this.ajaxInfo),this.tabContainer.setLogInListener(this.ajaxInfo),this.tabContainer.setUpdateShippingFieldsListener(this.ajaxInfo),this.tabContainer.setUpdateAllShippingFieldsListener(this.ajaxInfo)},e.prototype.setupAnimationListeners=function(){$("#cfw-ci-login").on("click",function(){$("#cfw-login-slide").slideDown(300)})},Object.defineProperty(e.prototype,"tabContainer",{get:function(){return this._tabContainer},set:function(e){this._tabContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ajaxInfo",{get:function(){return this._ajaxInfo},set:function(e){this._ajaxInfo=e},enumerable:!0,configurable:!0}),e}();t.Main=n});