var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};define("Elements/Element",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.jel=e}return Object.defineProperty(e.prototype,"jel",{get:function(){return this._jel},set:function(e){this._jel=e},enumerable:!0,configurable:!0}),e}();t.Element=n}),define("Elements/TabContainerBreadcrumb",["require","exports","Elements/Element"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(n.Element);t.TabContainerBreadcrumb=i}),define("Enums/LabelType",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.TEXT=0]="TEXT",e[e.TEL=1]="TEL",e[e.EMAIL=2]="EMAIL",e[e.PASSWORD=3]="PASSWORD",e[e.SELECT=4]="SELECT"}(t.LabelType||(t.LabelType={}))}),define("Enums/AlertType",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.LoginFailBadAccInfo=0]="LoginFailBadAccInfo"}(t.AlertType||(t.AlertType={}))}),define("Types/Types",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}),define("Elements/FormElement",["require","exports","Elements/Element","Enums/LabelType"],function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t){var n=e.call(this,t)||this;return n._eventCallbacks=[],n}return __extends(t,e),t.getLabelTypes=function(){return $.map(i.LabelType,function(e,t){return[e]})},t.prototype.regAndWrap=function(){this.registerEventCallbacks(),this.wrapClassSwap(this.holder.jel.val())},t.prototype.setHolderAndLabel=function(e,i){void 0===i&&(i=!1);for(var r=t.getLabelTypes(),a=0;a<r.length/2;a++){var o=e;if(i&&"string"==typeof e){var s=r[a].toLowerCase();o=this.jel.find(e.replace("%s",s))}o.length>0&&(this.holder=new n.Element(o))}},t.prototype.wrapClassSwap=function(e){""===e||this.jel.hasClass(t.labelClass)||this.jel.addClass(t.labelClass),""===e&&this.jel.hasClass(t.labelClass)&&this.jel.removeClass(t.labelClass)},t.prototype.registerEventCallbacks=function(){var e=this;this.holder&&this.eventCallbacks.forEach(function(t){var n=t.eventName,i=t.func,r=t.target;r||(r=e.holder.jel),r.on(n,i)})},Object.defineProperty(t,"labelClass",{get:function(){return t._labelClass},set:function(e){t._labelClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventCallbacks",{get:function(){return this._eventCallbacks},set:function(e){this._eventCallbacks=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moduleContainer",{get:function(){return this._moduleContainer},set:function(e){this._moduleContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"holder",{get:function(){return this._holder},set:function(e){this._holder=e},enumerable:!0,configurable:!0}),t._labelClass="cfw-floating-label",t}(n.Element);t.FormElement=r}),define("Elements/InputLabelWrap",["require","exports","Elements/FormElement"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.setHolderAndLabel('input[type="%s"]',!0),n.eventCallbacks=[{eventName:"keyup",func:function(){this.wrapClassSwap(this.holder.jel.val())}.bind(n),target:null}],n.regAndWrap(),n}return __extends(t,e),t}(n.FormElement);t.InputLabelWrap=i}),define("Elements/SelectLabelWrap",["require","exports","Elements/FormElement"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.setHolderAndLabel(n.jel.find("select")),n.eventCallbacks=[{eventName:"change",func:function(){this.wrapClassSwap(this.holder.jel.val())}.bind(n),target:null},{eventName:"keyup",func:function(){this.wrapClassSwap(this.holder.jel.val())}.bind(n),target:null}],n.regAndWrap(),n}return __extends(t,e),t}(n.FormElement);t.SelectLabelWrap=i}),define("Elements/TabContainerSection",["require","exports","Elements/Element","Elements/InputLabelWrap","Enums/LabelType","Elements/SelectLabelWrap"],function(e,t,n,i,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var i=e.call(this,t)||this;return i._name="",i._inputLabelWraps=[],i._selectLabelWraps=[],i.name=n,i}return __extends(t,e),t.prototype.getInputLabelWrapById=function(e){return this.inputLabelWraps.find(function(t){return t.jel.attr("id")==e})},t.prototype.getWrapSelector=function(){var e="";return t.inputLabelTypes.forEach(function(n,i){e+="."+t.inputLabelWrapClass+"."+n.cssClass,i+1!=t.inputLabelTypes.length&&(e+=", ")}),e},t.prototype.getInputsFromSection=function(e){void 0===e&&(e="");var t=[];return this.jel.find("input"+e).each(function(e,i){t.push(new n.Element($(i)))}),t},t.prototype.setWraps=function(){var e=[],t=[];this.jel.find(this.getWrapSelector()).each(function(n,r){var o=$(r).parents(".cfw-module");if($(r).hasClass("cfw-select-input")){var s=new a.SelectLabelWrap($(r));s.moduleContainer=o,t.push(s)}else{var c=new i.InputLabelWrap($(r));c.moduleContainer=o,e.push(c)}}),this.inputLabelWraps=e,this.selectLabelWraps=t},t.prototype.getFormElementsByModule=function(e){var t=[];return this.inputLabelWraps.forEach(function(n){n.moduleContainer.attr("id")==e&&t.push(n)}),this.selectLabelWraps.forEach(function(n){n.moduleContainer.attr("id")==e&&t.push(n)}),t},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputLabelWraps",{get:function(){return this._inputLabelWraps},set:function(e){this._inputLabelWraps=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectLabelWraps",{get:function(){return this._selectLabelWraps},set:function(e){this._selectLabelWraps=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"inputLabelTypes",{get:function(){return t._inputLabelTypes},set:function(e){t._inputLabelTypes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"inputLabelWrapClass",{get:function(){return t._inputLabelWrapClass},set:function(e){t._inputLabelWrapClass=e},enumerable:!0,configurable:!0}),t._inputLabelWrapClass="cfw-input-wrap",t._inputLabelTypes=[{type:r.LabelType.TEXT,cssClass:"cfw-text-input"},{type:r.LabelType.PASSWORD,cssClass:"cfw-password-input"},{type:r.LabelType.SELECT,cssClass:"cfw-select-input"}],t}(n.Element);t.TabContainerSection=o}),define("Actions/Action",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.id=e,this.url=t,this.data=n}return e.prototype.load=function(){$.post(this.url.href,this.data,this.response.bind(this))},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),e}();t.Action=n}),define("Decorators/ResponsePrep",["require","exports"],function(e,t){function n(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var i=n.value;return n.value=function(){return arguments[0]=JSON.parse(arguments[0]),i.apply(this,arguments)},n}Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsePrep=n}),define("Elements/Alert",["require","exports","Elements/Element"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){var i=e.call(this,t)||this;return i.alertInfo=n,i}return __extends(t,e),t.prototype.addAlert=function(){t.previousClass&&this.jel.removeClass(t.previousClass),$("#cfw-content").removeClass("show-overlay"),this.jel.find(".message").html(this.alertInfo.message),this.jel.addClass(this.alertInfo.cssClass),this.jel.slideDown(300),window.scrollTo(0,0),t.previousClass=this.alertInfo.cssClass},Object.defineProperty(t.prototype,"alertInfo",{get:function(){return this._alertInfo},set:function(e){this._alertInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"previousClass",{get:function(){return this._previousClass},set:function(e){this._previousClass=e},enumerable:!0,configurable:!0}),t}(n.Element);t.Alert=i}),define("Actions/AccountExistsAction",["require","exports","Actions/Action","Decorators/ResponsePrep"],function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n,i,r){var a=this,o={action:t,security:n.nonce,email:i};return a=e.call(this,t,n.admin_url,o)||this,a.ezTabContainer=r,a}return __extends(t,e),t.prototype.response=function(e){var t=function(){$("#cfw-login-slide").slideDown(300),$("#cfw-login-slide input[type='password']").focus(),$("#cfw-acc-register-chk").attr("checked",null),$("#cfw-login-btn").css("display","block")};e.account_exists?(this.ezTabContainer.bind("easytabs:after",function(){e.account_exists&&t()}),t(),this.ezTabContainer.easytabs("select","#cfw-customer-info")):$("#cfw-acc-register-chk:checked").length>0?($("#cfw-login-slide").slideDown(300),$("#cfw-login-btn").css("display","none")):($("#cfw-acc-register-chk").length>0?$("#cfw-login-slide").slideUp(300):($("#cfw-login-slide").css("display","block"),$("#cfw-login-btn").css("display","none")),$("#cfw-login-slide input[type='password']").val(""))},Object.defineProperty(t.prototype,"ezTabContainer",{get:function(){return this._ezTabContainer},set:function(e){this._ezTabContainer=e},enumerable:!0,configurable:!0}),__decorate([i.ResponsePrep],t.prototype,"response",null),t}(n.Action);t.AccountExistsAction=r}),define("Actions/LoginAction",["require","exports","Actions/Action","Elements/Alert","Decorators/ResponsePrep"],function(e,t,n,i,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n,i,r){var a={action:t,security:n.nonce,email:i,password:r};return e.call(this,t,n.admin_url,a)||this}return __extends(t,e),t.prototype.response=function(e){if(e.logged_in)location.reload();else{var t={type:"LoginFailBadAccInfo",message:e.message,cssClass:"cfw-alert-danger"};new i.Alert($("#cfw-alert-container"),t).addAlert()}},__decorate([r.ResponsePrep],t.prototype,"response",null),t}(n.Action);t.LoginAction=a}),define("Elements/Cart",["require","exports","Elements/Element"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,i,r,a,o,s){var c=e.call(this,t)||this;return c.subTotal=new n.Element(i),c.shipping=new n.Element(r),c.taxes=new n.Element(a),c.total=new n.Element(o),c.coupons=new n.Element(s),c}return __extends(t,e),t.outputValues=function(e,n){t.outputValue(e.subTotal,n.new_subtotal),t.outputValue(e.shipping,n.new_shipping_total),t.outputValue(e.taxes,n.new_taxes_total),t.outputValue(e.total,n.new_total)},t.outputCoupons=function(e,t){e.jel.html(""),e.jel.length>0&&t.forEach(function(t){var n=$('<div class="cfw-cart-coupon cfw-flex-row cfw-flex-justify">'),i=$('<span class="type"></span>').html(t.label),r=$('<span class="amount"></span>').html(t.amount);n.append(i),n.append(r),e.jel.append(n)})},t.outputValue=function(e,t,n){void 0===n&&(n=".amount"),e.jel.length>0&&e.jel.children(n).html(t)},Object.defineProperty(t.prototype,"subTotal",{get:function(){return this._subTotal},set:function(e){this._subTotal=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shipping",{get:function(){return this._shipping},set:function(e){this._shipping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"taxes",{get:function(){return this._taxes},set:function(e){this._taxes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._total},set:function(e){this._total=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"coupons",{get:function(){return this._coupons},set:function(e){this._coupons=e},enumerable:!0,configurable:!0}),t}(n.Element);t.Cart=i}),define("Actions/UpdateShippingFieldsAction",["require","exports","Actions/Action","Decorators/ResponsePrep","Elements/Cart"],function(e,t,n,i,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n,i,r,a,o){var s=this,c={action:t,security:n.nonce,shipping_fields_info:i};return s=e.call(this,t,n.admin_url,c)||this,s.shipping_details_fields=r,s.cart=a,s.tabContainer=o,s.ajaxInfo=n,s}return __extends(t,e),t.prototype.response=function(e){var t=this;if(!e.error){var n=[],i=[];e.updated_fields_info&&(Object.keys(e.updated_fields_info).forEach(function(t){return n.push(e.updated_fields_info[t])}),Object.keys(e.updated_ship_methods).forEach(function(t){return i.push(e.updated_ship_methods[t])}),n.sort(),n.forEach(function(e){var n=e.field_type,i=e.field_value;t.shipping_details_fields.forEach(function(e){e.attr("field_type")==n&&e.children(".field_value").text(i)})}),i.length>0&&$("#shipping_method").html(""),i.forEach(function(e){var t=$("<li>"+e+"</li>");$("#shipping_method").append(t)}),this.tabContainer.setShippingPaymentUpdate(this.ajaxInfo,this.cart),r.Cart.outputValues(this.cart,e.new_totals))}},Object.defineProperty(t.prototype,"ajaxInfo",{get:function(){return this._ajaxInfo},set:function(e){this._ajaxInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabContainer",{get:function(){return this._tabContainer},set:function(e){this._tabContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cart",{get:function(){return this._cart},set:function(e){this._cart=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shipping_details_fields",{get:function(){return this._shipping_details_fields},set:function(e){this._shipping_details_fields=e},enumerable:!0,configurable:!0}),__decorate([i.ResponsePrep],t.prototype,"response",null),t}(n.Action);t.UpdateShippingFieldsAction=a}),define("Actions/UpdateShippingMethodAction",["require","exports","Actions/Action","Decorators/ResponsePrep","Elements/Cart"],function(e,t,n,i,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n,i,r){var a=this,o={action:t,security:n.nonce,shipping_method:[i]};return a=e.call(this,t,n.admin_url,o)||this,a.cart=r,a}return __extends(t,e),t.prototype.response=function(e){e.new_totals&&r.Cart.outputValues(this.cart,e.new_totals)},Object.defineProperty(t.prototype,"cart",{get:function(){return this._cart},set:function(e){this._cart=e},enumerable:!0,configurable:!0}),__decorate([i.ResponsePrep],t.prototype,"response",null),t}(n.Action);t.UpdateShippingMethodAction=a}),define("Services/StripeService",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.setupStripeMessageListener=function(t){window.addEventListener("message",function(n){return e.stripeMessageListener(n,t)},{once:!0})},e.stripeMessageListener=function(t,n){var i=t.origin;if(this.serviceUrls.find(function(e){return i==e})&&"string"==typeof t.data){var r=e.parseStripeMessage(t.data);switch(r.code){case 200:n.success(r.resp);break;case 400:n.noData(r.resp);break;case 402:n.badData(r.resp)}}},e.triggerStripe=function(){var e=$("form.woocommerce-checkout");e.trigger("checkout_place_order_stripe"),e.on("submit",function(e){return e.preventDefault()})},e.parseStripeMessage=function(e){var t=e.match("default\\d{0,}(?:(?!{).)*"),n=null;if(t.length>0){var i=t[0],r=e.substr(i.length,e.length);n=JSON.parse(r)}return n},e.hasStripe=function(){return $("#payment_method_stripe:checked").length>0},e.hasNewPayment=function(){return $("#wc-stripe-payment-token-new:checked").length>0},Object.defineProperty(e,"serviceUrls",{get:function(){return this._serviceUrls},set:function(e){this._serviceUrls=e},enumerable:!0,configurable:!0}),e._serviceUrls=["https://js.stripe.com"],e}();t.StripeService=n}),define("Services/ValidationService",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.SHIPPING=0]="SHIPPING",e[e.BILLING=1]="BILLING",e[e.ACCOUNT=2]="ACCOUNT"}(n=t.EValidationSections||(t.EValidationSections={}));var i=function(){function e(e){this._easyTabsOrder=[],this.tabContainer=e,this.easyTabsOrder=[$("#cfw-customer-info"),$("#cfw-shipping-method"),$("#cfw-payment-method")],this.setup()}return e.prototype.setup=function(){this.setEventListeners(),this.setStripeCacheDestroyers(),"#cfw-customer-info"!=window.location.hash&&""!=window.location.hash&&(this.validate(n.SHIPPING)||(window.location.hash="#cfw-customer-info"))},e.prototype.setEventListeners=function(){this.tabContainer.jel.bind("easytabs:before",function(e,t,i,r){var a,o;if(this.easyTabsOrder.forEach(function(e,t){0!==e.filter(":visible").length&&(a=t),e.is($(i))&&(o=t)}),o>a&&0===a){var s=this.validate(n.SHIPPING);return s||(window.location.hash="#"+this.easyTabsOrder[a].attr("id")),s}return!0}.bind(this))},e.prototype.setStripeCacheDestroyers=function(){var e=["stripe-card-number","stripe-card-expiry","stripe-card-cvc"];e.forEach(function(t){$("#"+t).on("keyup",function(){e.forEach(function(e){$("#"+e).garlic("destroy")})})})},e.prototype.validate=function(e){var t;switch(e){case n.SHIPPING:t=$("#cfw-checkout-form").parsley().validate("shipping");break;case n.BILLING:t=$("#cfw-checkout-form").parsley().validate("billing");break;case n.ACCOUNT:t=$("#cfw-checkout-form").parsley().validate("account")}return null==t&&(t=!0),t},Object.defineProperty(e.prototype,"easyTabsOrder",{get:function(){return this._easyTabsOrder},set:function(e){this._easyTabsOrder=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabContainer",{get:function(){return this._tabContainer},set:function(e){this._tabContainer=e},enumerable:!0,configurable:!0}),e}();t.ValidationService=i}),define("Actions/CompleteOrderAction",["require","exports","Actions/Action","Services/StripeService","Elements/Alert","Main","Services/ValidationService"],function(e,t,n,i,r,a,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n,i){var a=this,o={action:t,security:n.nonce,billing_first_name:i.billing_first_name,billing_last_name:i.billing_last_name,billing_company:i.billing_company,billing_country:i.billing_country,billing_address_1:i.billing_address_1,billing_address_2:i.billing_address_2,billing_city:i.billing_city,billing_state:i.billing_state,billing_postcode:i.billing_postcode,billing_phone:i.billing_phone,billing_email:i.billing_email,ship_to_different_address:i.ship_to_different_address,shipping_first_name:i.shipping_first_name,shipping_last_name:i.shipping_last_name,shipping_company:i.shipping_company,shipping_country:i.shipping_country,shipping_address_1:i.shipping_address_1,shipping_address_2:i.shipping_address_2,shipping_city:i.shipping_city,shipping_state:i.shipping_state,shipping_postcode:i.shipping_postcode,order_comments:i.order_comments,"shipping_method[0]":i["shipping_method[0]"],payment_method:i.payment_method,"wc-stripe-payment-token":i["wc-stripe-payment-token"],_wpnonce:i._wpnonce,_wp_http_referer:i._wp_http_referer};return i.account_password&&(o.account_password=i.account_password),i.createaccount&&(o.createaccount=i.createaccount),i["wc-stripe-new-payment-method"]&&(o["wc-stripe-new-payment-method"]=i["wc-stripe-new-payment-method"]),a=e.call(this,t,n.admin_url,o)||this,$("#cfw-content").addClass("show-overlay"),a.stripeServiceCallbacks={success:function(e){a.stripeResponse=e,a.addStripeTokenToData(e.id),a.needsStripeToken=!1,a.load()},noData:function(e){var t={type:"StripeNoDataError",message:"Stripe: "+e.error.message,cssClass:"cfw-alert-danger"};new r.Alert($("#cfw-alert-container"),t).addAlert()},badData:function(e){var t={type:"StripeBadDataError",message:"Stripe: "+e.error.message,cssClass:"cfw-alert-danger"};new r.Alert($("#cfw-alert-container"),t).addAlert(),a.resetData()}},a.setup(),a}return __extends(t,e),t.prototype.addStripeTokenToData=function(e){e&&(this.data.stripe_token=e,this.data.payment_method||(this.data.payment_method="stripe"))},t.prototype.setup=function(){i.StripeService.hasStripe()&&i.StripeService.hasNewPayment()?(this.needsStripeToken=!0,i.StripeService.setupStripeMessageListener(this.stripeServiceCallbacks),i.StripeService.triggerStripe()):(this.needsStripeToken=!1,this.load())},t.prototype.load=function(){this.needsStripeToken||e.prototype.load.call(this)},Object.defineProperty(t.prototype,"needsStripeToken",{get:function(){return this._needsStripeToken},set:function(e){this._needsStripeToken=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stripeServiceCallbacks",{get:function(){return this._stripeServiceCallbacks},set:function(e){this._stripeServiceCallbacks=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stripeResponse",{get:function(){return this._stripeResponse},set:function(e){this._stripeResponse=e},enumerable:!0,configurable:!0}),t.prototype.response=function(e){if("success"===e.result&&(window.location.href=e.redirect),"failure"===e.result){var t={type:"AccPassRequiredField",message:e.messages,cssClass:"cfw-alert-danger"};new r.Alert($("#cfw-alert-container"),t).addAlert(),this.resetData()}},t.prototype.resetData=function(){var e=this;$("#cfw-password").val(this.data.account_password),$("#cfw-email").val(this.data.billing_email),$("#billing_first_name").val(this.data.billing_first_name),$("#billing_last_name").val(this.data.billing_last_name),$("#billing_company").val(this.data.billing_company),$("#billing_country").val(this.data.billing_country),$("#billing_address_1").val(this.data.billing_address_1),$("#billing_address_2").val(this.data.billing_address_2),$("#billing_city").val(this.data.billing_city),$("#billing_state").val(this.data.billing_state),$("#billing_postcode").val(this.data.billing_postcode),$("#shipping_first_name").val(this.data.shipping_first_name),$("#shipping_last_name").val(this.data.shipping_last_name),$("#shipping_company").val(this.data.shipping_company),$("#shipping_country").val(this.data.shipping_country),$("#shipping_address_1").val(this.data.shipping_address_1),$("#shipping_address_2").val(this.data.shipping_address_2),$("#shipping_city").val(this.data.shipping_city),$("#shipping_state").val(this.data.shipping_state),$("#shipping_postcode").val(this.data.shipping_postcode),$("[name='shipping_method[0]']").each(function(t,n){$(n).val()==e.data["shipping_method[0]"]&&$(n).prop("checked",!0)}),$("[name='shipping_same']").each(function(t,n){$(n).val()==e.data.ship_to_different_address&&$(n).prop("checked",!0)}),$('[name="payment_method"]').each(function(t,n){$(n).val()==e.data.payment_method&&$(n).prop("checked",!0)}),$("[name='wc-stripe-payment-token']").each(function(t,n){$(n).val()==e.data["wc-stripe-payment-token"]&&$(n).prop("checked",!0)}),$("#_wpnonce").val(this.data._wpnonce),$("[name='_wp_http_referer']").val(this.data._wp_http_referer),$("#cfw-login-btn").val("Login"),a.Main.instance.validationService.validate(o.EValidationSections.SHIPPING),a.Main.instance.validationService.validate(o.EValidationSections.BILLING),a.Main.instance.validationService.validate(o.EValidationSections.ACCOUNT)},t}(n.Action);t.CompleteOrderAction=s}),define("Actions/ApplyCouponAction",["require","exports","Actions/Action","Decorators/ResponsePrep","Elements/Cart","Elements/Alert"],function(e,t,n,i,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,i,r){var a=this,o={action:t,security:n.nonce,coupon_code:i};return a=e.call(this,t,n.admin_url,o)||this,a.cart=r,a}return __extends(t,e),t.prototype.response=function(e){var t;if(e.new_totals&&r.Cart.outputValues(this.cart,e.new_totals),e.coupons){var n=$.map(e.coupons,function(e,t){return[e]});r.Cart.outputCoupons(this.cart.coupons,n)}e.message.success&&(t={type:"ApplyCouponSuccess",message:e.message.success[0],cssClass:"cfw-alert-success"}),e.message.error&&(t={type:"ApplyCouponError",message:e.message.error[0],cssClass:"cfw-alert-danger"}),new a.Alert($("#cfw-alert-container"),t).addAlert()},Object.defineProperty(t.prototype,"cart",{get:function(){return this._cart},set:function(e){this._cart=e},enumerable:!0,configurable:!0}),__decorate([i.ResponsePrep],t.prototype,"response",null),t}(n.Action);t.ApplyCouponAction=o}),define("Elements/TabContainer",["require","exports","Elements/Element","Actions/AccountExistsAction","Actions/LoginAction","Actions/UpdateShippingFieldsAction","Actions/UpdateShippingMethodAction","Actions/CompleteOrderAction","Main","Actions/ApplyCouponAction","Services/ValidationService"],function(e,t,n,i,r,a,o,s,c,l,p){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.tabContainerBreadcrumb=n,r.tabContainerSections=i,r}return __extends(t,e),t.prototype.setAccountCheckListener=function(e){var t=this,n=this.tabContainerSectionBy("name","customer_info"),r=n.getInputLabelWrapById("cfw-email-wrap");if(r){var a=r.holder.jel,o=$("#cfw-acc-register-chk");new i.AccountExistsAction("account_exists",e,a.val(),this.jel).load();var s=function(){return new i.AccountExistsAction("account_exists",e,a.val(),t.jel).load()};a.on("keyup",s),a.on("change",s),o.on("change",s);new i.AccountExistsAction("account_exists",e,a.val(),this.jel).load()}},t.prototype.setLogInListener=function(e){var t=this.tabContainerSectionBy("name","customer_info"),n=t.getInputLabelWrapById("cfw-email-wrap");if(n){var i=n.holder.jel,a=t.getInputLabelWrapById("cfw-password-wrap"),o=a.holder.jel;$("#cfw-login-btn").on("click",function(){return new r.LoginAction("login",e,i.val(),o.val()).load()})}},t.prototype.setUpdateShippingFieldsListener=function(e,n){var i=this.tabContainerSectionBy("name","customer_info"),r=i.getFormElementsByModule("cfw-shipping-info"),a=this.getUpdateShippingRequiredItems(),o=this,s=function(e,i,r,a,s){e.holder.jel.on(s,function(s){return t.genericUpdateShippingFieldsActionProcess(e,s.target.value,r,i,a,n,o).load()})};r.forEach(function(t){return s(t,a.action,e,a.shipping_details_fields,"change")})},t.prototype.setUpdateAllShippingFieldsListener=function(e,n){var i=this.tabContainerSectionBy("name","customer_info"),r=i.getFormElementsByModule("cfw-shipping-info"),a=i.jel.find("#cfw-shipping-info-action"),o=this.tabContainerBreadcrumb.jel.find(".tab:nth-child(2), .tab:nth-child(3)"),s=this.getUpdateShippingRequiredItems(),c=this,l=function(i){r.forEach(function(i){return t.genericUpdateShippingFieldsActionProcess(i,i.holder.jel.val(),e,s.action,s.shipping_details_fields,n,c).load()})};a.on("click",l.bind(this)),o.on("click",l.bind(this))},t.genericUpdateShippingFieldsActionProcess=function(e,t,n,i,r,o,s){var c=e.holder.jel.attr("field_key"),l={field_type:c,field_value:t};return new a.UpdateShippingFieldsAction(i,n,[l],r,o,s)},t.prototype.setUpCreditCardRadioReveal=function(){var e=$(".payment_method_stripe");if(e.length>0){e.find('input[type="radio"][name="wc-stripe-payment-token"]').each(function(e,t){"wc-stripe-payment-token-new"==$(t).attr("id")?($(t).on("click",function(){$("#wc-stripe-cc-form").slideDown(300),$(".woocommerce-SavedPaymentMethods-saveNew").slideDown(300),$(".wc-saved-payment-methods").removeClass("kill-bottom-margin")}),$(t).is(":checked")&&($("#wc-stripe-cc-form").slideDown(300),$(".woocommerce-SavedPaymentMethods-saveNew").slideDown(300),$(".wc-saved-payment-methods").removeClass("kill-bottom-margin"))):($(t).on("click",function(){$("#wc-stripe-cc-form").slideUp(300),$(".woocommerce-SavedPaymentMethods-saveNew").slideUp(300),$(".wc-saved-payment-methods").addClass("kill-bottom-margin")}),$(t).is(":checked")&&$(".wc-saved-payment-methods").addClass("kill-bottom-margin"))})}},t.prototype.setUpCreditCardFields=function(){var e=$("#wc-stripe-cc-form .form-row");$("#wc-stripe-cc-form").wrapInner("<div class='cfw-sg-container cfw-input-wrap-row'>"),$("#wc-stripe-cc-form").find(".clear").remove(),e.each(function(e,t){$(t).addClass("cfw-input-wrap"),$(t).addClass("cfw-text-input"),$(t).find("label").addClass("cfw-input-label"),$(t).find("input").css("width","100%"),$(t).hasClass("form-row-wide")&&$(t).wrap("<div class='cfw-column-6'></div>"),($(t).hasClass("form-row-first")||$(t).hasClass("form-row-last"))&&$(t).wrap("<div class='cfw-column-3'></div>")})},t.prototype.setUpPaymentTabRadioButtons=function(){var e=this.tabContainerSectionBy("name","payment_method").getInputsFromSection('[type="radio"][name="payment_method"]'),t=this.tabContainerSectionBy("name","payment_method").getInputsFromSection('[type="radio"][name="shipping_same"]');this.setRevealOnRadioButtonGroup(e),this.setRevealOnRadioButtonGroup(t,!0)},t.prototype.setRevealOnRadioButtonGroup=function(e,t){void 0===t&&(t=!1);var n=function(n){e.filter(function(e){return e!=n}).forEach(function(e){return e.jel.parents(".cfw-radio-reveal-title-wrap").siblings(".cfw-radio-reveal-content-wrap").slideUp(300)}),n.jel.parents(".cfw-radio-reveal-title-wrap").siblings(".cfw-radio-reveal-content-wrap").slideDown(300);var i=$("#cfw-billing-fields-container").find(".cfw-input-wrap");t&&i.each(function(e,t){[$(t).find("input"),$(t).find("select")].forEach(function(e){e.length>0&&(1==n.jel.val()?e[0].hasAttribute("cfw-required-placeholder")&&(e[0].setAttribute("required",""),e[0].removeAttribute("cfw-required-placeholder")):(e[0].hasAttribute("required")&&e[0].setAttribute("cfw-required-placeholder",""),e[0].removeAttribute("required")))})})};e.forEach(function(e){e.jel.on("click",function(){n(e)}),e.jel.is(":checked")&&n(e)})},t.prototype.setShippingPaymentUpdate=function(e,t){var n=this,i=function(n){var i=n.target.value;new o.UpdateShippingMethodAction("update_shipping_method",e,i,t).load()};this.tabContainerSectionBy("name","shipping_method").jel.find('#cfw-shipping-method input[type="radio"]').each(function(e,t){$(t).on("click",i.bind(n))})},t.prototype.setShippingFieldsOnLoad=function(){var e=this.tabContainerSectionBy("name","customer_info"),t=e.getFormElementsByModule("cfw-shipping-info"),n=this.getUpdateShippingRequiredItems();t.forEach(function(e){var t=e.holder.jel.attr("field_key"),i=e.holder.jel.val();n.shipping_details_fields.find(function(e){return e.attr("field_type")==t}).children(".field_value").text(i)})},t.prototype.setUpMobileCartDetailsReveal=function(){new n.Element($("#cfw-show-cart-details")).jel.on("click",function(){$("#cfw-cart-details-collapse-wrap").slideToggle(300).parent().toggleClass("active")}),$(window).on("resize",function(){window.innerWidth>=767?($("#cfw-cart-details-collapse-wrap").css("display","block"),$("#cfw-cart-details").removeClass("active")):$("#cfw-cart-details-collapse-wrap").css("display","none")})},t.prototype.getOrderDetails=function(){
var e=parseInt($("[name='shipping_same']:checked").val()),t=$('[name="payment_method"]:checked').val(),n=$("#cfw-password").val(),i=$("#cfw-email").val(),r=$("#billing_first_name").val(),a=$("#billing_last_name").val(),o=$("#billing_company").val(),s=$("#billing_country").val(),c=$("#billing_address_1").val(),l=$("#billing_address_2").val(),p=$("#billing_city").val(),u=$("#billing_state").val(),d=$("#billing_postcode").val(),f=$("#shipping_first_name").val(),h=$("#shipping_last_name").val(),_=$("#shipping_company").val(),b=$("#shipping_country").val(),g=$("#shipping_address_1").val(),m=$("#shipping_address_2").val(),y=$("#shipping_city").val(),v=$("#shipping_state").val(),w=$("#shipping_postcode").val(),C=$("[name='shipping_method[0]']:checked").val(),S=$("#_wpnonce").val(),j=$("[name='_wp_http_referer']").val(),A=$("[name='wc-stripe-payment-token']").val();0===e&&(r=f,a=h,o=_,s=b,c=g,l=m,p=y,u=v,d=w);var E={billing_first_name:r,billing_last_name:a,billing_company:o,billing_country:s,billing_address_1:c,billing_address_2:l,billing_city:p,billing_state:u,billing_postcode:d,billing_phone:0,billing_email:i,ship_to_different_address:e,shipping_first_name:f,shipping_last_name:h,shipping_company:_,shipping_country:b,shipping_address_1:g,shipping_address_2:m,shipping_city:y,shipping_state:v,shipping_postcode:w,order_comments:"","shipping_method[0]":C,payment_method:t,"wc-stripe-payment-token":A,_wpnonce:S,_wp_http_referer:j};return n&&n.length>0&&(E.account_password=n),$("#cfw-acc-register-chk:checked").length>0&&(E.createaccount=1),$("#wc-stripe-new-payment-method:checked").length>0&&(E["wc-stripe-new-payment-method"]=!0),E},t.prototype.setCompleteOrder=function(e,t){var i=this;new n.Element($("#cfw-complete-order-button")).jel.on("click",function(){var t=!0;0!==$("#shipping_dif_from_billing:checked").length&&(t=c.Main.instance.validationService.validate(p.EValidationSections.BILLING)),t&&new s.CompleteOrderAction("complete_order",e,i.getOrderDetails())})},t.prototype.setApplyCouponListener=function(e,t){$("#cfw-promo-code-btn").on("click",function(){new l.ApplyCouponAction("apply_coupon",e,$("#cfw-promo-code").val(),t).load()})},t.prototype.getUpdateShippingRequiredItems=function(){var e=$("#cfw-shipping-details-fields .cfw-shipping-details-field"),t=[];return e.each(function(e,n){t.push($(n))}),{action:"update_shipping_fields",shipping_details_fields:t}},t.prototype.easyTabs=function(){this.jel.easytabs()},t.prototype.tabContainerSectionBy=function(e,t){return this.tabContainerSections.find(function(n){return n[e]==t})},Object.defineProperty(t.prototype,"tabContainerBreadcrumb",{get:function(){return this._tabContainerBreadcrumb},set:function(e){this._tabContainerBreadcrumb=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabContainerSections",{get:function(){return this._tabContainerSections},set:function(e){this._tabContainerSections=e},enumerable:!0,configurable:!0}),t}(n.Element);t.TabContainer=u}),define("Main",["require","exports","Services/ValidationService"],function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,i,r,a){this.tabContainer=t,this.ajaxInfo=i,this.cart=r,this.settings=a,this.validationService=new n.ValidationService(t),e.instance=this}return e.prototype.setup=function(){this.tabContainer.easyTabs(),this.setupAnimationListeners(),this.tabContainer.setUpCreditCardFields(),this.tabContainer.tabContainerSections.forEach(function(e){return e.setWraps()}),this.tabContainer.setAccountCheckListener(this.ajaxInfo),this.tabContainer.setLogInListener(this.ajaxInfo),this.tabContainer.setUpdateShippingFieldsListener(this.ajaxInfo,this.cart),this.tabContainer.setUpdateAllShippingFieldsListener(this.ajaxInfo,this.cart),this.tabContainer.setShippingPaymentUpdate(this.ajaxInfo,this.cart),this.tabContainer.setUpPaymentTabRadioButtons(),this.tabContainer.setUpCreditCardRadioReveal(),this.tabContainer.setUpMobileCartDetailsReveal(),this.tabContainer.setCompleteOrder(this.ajaxInfo,this.cart),this.tabContainer.setApplyCouponListener(this.ajaxInfo,this.cart),this.tabContainer.setShippingFieldsOnLoad()},e.prototype.setupAnimationListeners=function(){$("#cfw-ci-login").on("click",function(){$("#cfw-login-slide").slideDown(300)})},Object.defineProperty(e.prototype,"tabContainer",{get:function(){return this._tabContainer},set:function(e){this._tabContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ajaxInfo",{get:function(){return this._ajaxInfo},set:function(e){this._ajaxInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cart",{get:function(){return this._cart},set:function(e){this._cart=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(e){this._settings=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validationService",{get:function(){return this._validationService},set:function(e){this._validationService=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return e._instance},set:function(t){e._instance||(e._instance=t)},enumerable:!0,configurable:!0}),e}();t.Main=i});